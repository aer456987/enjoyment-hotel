import{_ as S}from"./nuxt-img.BpsOkbCC.js";import{_ as B}from"./nuxt-link.9B71KFjc.js";import V from"./Icon.wjsf6Hii.js";import{f as P,k as f,l as O,m as E,Q as F,o as l,c as n,g as o,a as e,t as d,b as m,w as U,i as y,F as v,r as W,d as I,E as z,T as G,p as Q,e as q,x as H,G as J}from"./entry.5F93Vz7a.js";import{T as K}from"./TheRoomsInfo.h0V5j6TX.js";import{_ as X}from"./_plugin-vue_export-helper.x3n3nnut.js";import"./vue.f36acd1f.SRfyHtNx.js";import"./index.0wqzsba0.js";import"./ic_Size.5L4B0xdu.js";const i=_=>(Q("data-v-8988a966"),_=_(),q(),_),Y={class:"user-wrapper order-wrapper"},Z={key:0,class:"card-wrapper trip-wrapper lh-lg ls-1 bg-white"},ee={class:"text-gray-80 mb-2"},oe=i(()=>e("div",{class:"fs-5 fw-bold"},"即將來的行程",-1)),te={class:"rounded-3 overflow-hidden"},se={class:"text-gray-80"},ae={class:"fs-6 fw-bold mb-4"},de={class:"room-info-title-border title-border-primary ps-3 mb-2 fs-7"},re={class:"room-info-title-border title-border-gray ps-3 mb-2 fs-7 mb-4"},le=i(()=>e("div",{class:"border-bottom"},null,-1)),ne={class:"d-flex gap-3 check-wrapper"},ie=i(()=>e("button",{class:"btn btn-outline-primary",type:"button","data-bs-target":"#ModalDeleteOrder","data-bs-toggle":"modal"}," 取消預訂 ",-1)),ce={class:"card-wrapper history-wrapper lh-lg ls-1 bg-white"},me=i(()=>e("h6",{class:"fs-md-5 card-title m-0 fw-bold"},"歷史訂單",-1)),_e={class:"history-container"},pe={class:"rounded-3 overflow-hidden"},ue={class:"history-content text-gray-80"},he={class:"fs-6 fw-bold"},be={class:"mb-2"},fe={class:"room-info-title-border title-border-primary ps-3 mb-2 fs-7"},ye={class:"room-info-title-border title-border-gray ps-3 mb-2 fs-7"},ve={class:"fw-bold"},ge=i(()=>e("div",{class:"border-bottom"},null,-1)),ke={id:"ModalDeleteOrder",class:"modal fade","aria-hidden":"true","aria-labelledby":"exampleModalLabel","data-bs-backdrop":"static",tabindex:"-1"},we={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},Ie={class:"modal-content"},De=i(()=>e("div",{class:"modal-header align-items-start"},[e("h5",{id:"exampleModalLabel",class:"modal-title fs-6 text-center flex-fill py-6"}," 確定要取消此房型的預訂嗎？ "),e("button",{class:"btn-close",type:"button","aria-label":"Close","data-bs-dismiss":"modal"})],-1)),$e={class:"modal-footer d-flex flex-row"},je=["disabled"],xe=["disabled"],Oe=P({__name:"orders",async setup(_){let p,D;const s=f({}),u=f([]),h=f(["日","一","二","三","四","五","六"]),b=f(!1),{getOrdersApi:N,deleteOrdersApi:T}=H(),$=O(()=>j.value),{pending:j,refresh:x}=([p,D]=E(()=>N({immediate:!1,watch:!1,onResponse({response:t}){if(t.status===200){const r=t._data.result.filter(L=>L.status==0);u.value=r;const c=r[0],{amenityInfo:g,facilityInfo:k,areaInfo:a,bedInfo:w,maxPeople:A}=r[0].roomId;c.roomDetail={amenityInfo:g,facilityInfo:k,areaInfo:a,bedInfo:w,maxPeople:A},s.value=c,b.value=!1}}})),p=await p,D(),p);j.value=!1,x();const{$swal:M}=J(),C=F("reload",()=>{}),R=async()=>{const t=O(()=>s.value._id);await T(t,{onResponse({response:r}){r.status===200&&M.fire({icon:"success",title:"訂單取消成功"}).then(()=>{x(),C()})}})};return(t,r)=>{const c=S,g=B,k=V;return l(),n("main",Y,[Object.keys(o(s)).length!==0?(l(),n("div",Z,[e("div",null,[e("div",ee,"預訂參考編號： "+d(o(s)._id),1),oe]),e("div",te,[m(c,{class:"order-img object-cover",src:o(s).roomId.imageUrl,alt:"Room_1"},null,8,["src"])]),e("div",se,[e("div",ae,d(o(s).roomId.name)+"，"+d(t.$dayjs(o(s).checkOutDate).diff(t.$dayjs(o(s).checkInDate),"d"))+" 晚 | 住宿人數："+d(o(s).peopleNum)+" 位 ",1),e("div",null,[e("h5",de," 入住："+d(t.$dayjs(o(s).checkInDate).format("M 月 D日")+"星期"+o(h)[t.$dayjs(o(s).checkInDate).day()])+"，15:00 可入住 ",1),e("h5",re," 退房："+d(t.$dayjs(o(s).checkOutDate).format("M 月 D日")+"星期"+o(h)[t.$dayjs(o(s).checkOutDate).day()])+"，12:00 前退房 ",1)]),e("span",null," NT$"+d(o(s).roomId.price.toLocaleString("zh-TW",{currency:"TWD",style:"decimal"})),1)]),le,m(K,{"room-detail":o(s).roomDetail,"mb-space":"4"},null,8,["room-detail"]),e("div",ne,[ie,m(g,{class:"btn btn-primary",to:`/room/${o(s).roomId._id}`},{default:U(()=>[I("查看詳情")]),_:1},8,["to"])])])):y("",!0),e("div",ce,[me,(l(!0),n(v,null,W(o(u),(a,w)=>(l(),n(v,null,[w<=2||o(b)?(l(),n(v,{key:0},[e("div",_e,[e("div",pe,[m(c,{class:"history-img object-cover",src:a.roomId.imageUrl,alt:"Room_1"},null,8,["src"])]),e("div",ue,[e("div",null,"預訂參考編號： "+d(a._id),1),e("div",he,d(a.roomId.name),1),e("div",null,[e("div",be," 住宿天數："+d(t.$dayjs(a.checkOutDate).diff(t.$dayjs(a.checkInDate),"d"))+" 晚 ",1),e("div",null,"住宿人數："+d(a.peopleNum)+" 位",1)]),e("div",null,[e("h5",fe," 入住："+d(t.$dayjs(a.checkInDate).format("M 月 D日")+"星期"+o(h)[t.$dayjs(a.checkInDate).day()]),1),e("h5",ye," 退房："+d(t.$dayjs(a.checkOutDate).format("M 月 D日")+"星期"+o(h)[t.$dayjs(a.checkOutDate).day()]),1)]),e("span",ve,"NT$"+d(a.roomId.price),1)])]),ge],64)):y("",!0)],64))),256)),o(u).length==0?(l(),n(v,{key:0},[I("您目前尚無任何訂單訂單")],64)):y("",!0),o(u).length>3&&!o(b)?(l(),n("button",{key:1,class:"btn btn-outline-primary",type:"button",onClick:r[0]||(r[0]=a=>b.value=!0)},[I(" 查看更多 "),m(k,{name:"ic:round-keyboard-arrow-down"})])):y("",!0)]),(l(),z(G,{to:"body"},[e("div",ke,[e("div",we,[e("div",Ie,[De,e("div",$e,[e("button",{class:"btn btn-outline-primary flex-fill","data-bs-dismiss":"modal",disabled:o($)}," 關閉視窗 ",8,je),e("button",{class:"btn btn-primary flex-fill","data-bs-dismiss":"modal",disabled:o($),onClick:R}," 確定取消 ",8,xe)])])])])]))])}}}),Ve=X(Oe,[["__scopeId","data-v-8988a966"]]);export{Ve as default};
