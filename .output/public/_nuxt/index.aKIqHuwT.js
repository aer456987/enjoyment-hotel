import{f as E,y as M,k as v,l as y,m as N,o as h,c as x,b as d,w as k,a as e,z as D,A as U,g as s,B as V,t as F,s as q,C as z,d as u,F as C,p as P,e as T,x as j,D as L}from"./entry.5F93Vz7a.js";import $ from"./Icon.wjsf6Hii.js";import{_ as G}from"./nuxt-link.9B71KFjc.js";import{_ as H}from"./ModalForgot.vue.DEjbM-pG.js";import{_ as J}from"./_plugin-vue_export-helper.x3n3nnut.js";import"./index.0wqzsba0.js";const m=c=>(P("data-v-499c2476"),c=c(),T(),c),K={class:"login-wrapper"},O=m(()=>e("div",null,[e("div",{class:"text-primary fs-8 fs-md-7 fw-bold lh-lg ls-1 mb-2"},"享樂酒店，誠摯歡迎"),e("div",{class:"text-light fs-3 fs-md-1 fw-bold lh-lg ls-1"},"立即開始旅程")],-1)),Q={class:"input-wrapper fs-8 fs-md-7 mb-5"},W=m(()=>e("label",{class:"form-label",for:"email"},"電子信箱",-1)),X={class:"text-danger fs-8 fw-bold mt-2"},Y=m(()=>e("label",{class:"form-label",for:"password"},"密碼",-1)),Z={class:"text-danger fs-8 fw-bold mt-2"},ee={class:"d-flex justify-content-between"},se={class:"form-check-label text-light",for:"remember"},te=["disabled"],oe=m(()=>e("button",{class:"btn btn-text fs-8 fs-md-7",type:"button","data-bs-target":"#ModalForgot","data-bs-toggle":"modal"}," 忘記密碼？ ",-1)),ae=["disabled"],le={class:"d-flex"},de=m(()=>e("div",{class:"text-light me-2 fs-8 fs-md-7"},"沒有會員嗎？",-1)),ie=E({__name:"index",async setup(c){let p,g;const t=M(),b=v(null),a=v({email:t.remember&&t.email?t.email:"",password:""}),S=()=>{R()},{loginApi:I}=j(),i=y(()=>w.value),{pending:w,refresh:R}=([p,g]=N(()=>I({body:y(()=>a.value),immediate:!1,watch:!1,onResponse({response:l}){l.status===200&&(t.token=l._data.token,t.me=l._data.result,t.email=t.remember?a.value.email:"",D("/"))},onResponseError({response:l}){var o,n,_;switch((o=l._data)==null?void 0:o.message){case"此使用者不存在":(n=b.value)==null||n.setFieldError("email","使用者不存在");break;case"密碼錯誤":case"密碼需至少 8 碼以上":case"密碼不能只有英文":case"密碼不能只有數字":case"密碼需至少 8 碼以上，並英數混合":(_=b.value)==null||_.setFieldError("password","密碼錯誤");break}}})),p=await p,g(),p);return w.value=!1,(l,o)=>{const n=L,_=$,A=U,B=G;return h(),x("main",K,[O,d(A,{ref_key:"formRefs",ref:b,onSubmit:S},{default:k(({errors:f})=>[e("div",Q,[e("div",null,[W,d(n,{id:"email",modelValue:s(a).email,"onUpdate:modelValue":o[0]||(o[0]=r=>s(a).email=r),modelModifiers:{trim:!0},class:V([f.email&&"verify-error","form-control"]),name:"email",label:"電子信箱",type:"email",placeholder:"hello@exsample.com",rules:"required|email",disabled:s(i)},null,8,["modelValue","class","disabled"]),e("div",X,F(f.email),1)]),e("div",null,[Y,d(n,{id:"password",modelValue:s(a).password,"onUpdate:modelValue":o[1]||(o[1]=r=>s(a).password=r),modelModifiers:{trim:!0},class:V([f.password&&"verify-error","form-control"]),name:"password",label:"密碼",type:"password",placeholder:"請輸入密碼",rules:"required",disabled:s(i)},null,8,["modelValue","class","disabled"]),e("div",Z,F(f.password),1)]),e("div",ee,[e("label",se,[q(e("input",{id:"remember","onUpdate:modelValue":o[2]||(o[2]=r=>s(t).remember=r),class:"form-check-input",type:"checkbox",disabled:s(i)},null,8,te),[[z,s(t).remember]]),u(" 記住帳號 ")]),oe,d(H)])]),e("button",{class:"btn btn-primary mb-2 d-flex align-items-center gap-2",type:"submit",disabled:s(i)},[s(i)?(h(),x(C,{key:1},[u(" 登入中 "),d(_,{class:"fs-5",name:"eos-icons:three-dots-loading"})],64)):(h(),x(C,{key:0},[u("會員登入")],64))],8,ae)]),_:1},512),e("div",le,[de,d(B,{class:"btn btn-text text-primary fs-8 fs-md-7",to:"/signup"},{default:k(()=>[u("前往註冊")]),_:1})])])}}}),fe=J(ie,[["__scopeId","data-v-499c2476"]]);export{fe as default};
