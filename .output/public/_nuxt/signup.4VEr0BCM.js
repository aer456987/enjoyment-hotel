import J from"./Icon.wjsf6Hii.js";import{f as K,k as M,l as D,O as Q,y as W,m as B,o as n,c as p,a as s,g as e,F as g,d as F,E as R,B as _,w as h,z as X,P as Z,A as ee,b as u,t as c,r as x,p as se,e as le,G as O,x as te,D as ae}from"./entry.5F93Vz7a.js";import{_ as de}from"./nuxt-link.9B71KFjc.js";import{u as oe}from"./useTmpl.tD3N_OHk.js";import{_ as ie}from"./_plugin-vue_export-helper.x3n3nnut.js";import"./index.0wqzsba0.js";const m=w=>(se("data-v-7f611229"),w=w(),le(),w),re={class:"login-wrapper"},ne=m(()=>s("div",{class:"text-primary fs-8 fs-md-7 fw-bold lh-lg ls-1 mb-2"},"享樂酒店，誠摯歡迎",-1)),me=m(()=>s("div",{class:"text-light fs-3 fs-md-1 fw-bold lh-lg ls-1 mb-3"},"立即註冊",-1)),ue={class:"py-3 d-flex align-items-center gap-2"},ce={class:"d-flex text-light flex-column align-items-center"},fe={class:"bg-primary rounded-circle num-ball mb-1"},pe=m(()=>s("div",{class:"fs-8 fs-md-7"},"輸入信箱及密碼",-1)),be=m(()=>s("div",{class:"fs-8 fs-md-7"},"填寫基本資料",-1)),_e={class:"input-wrapper fs-8 fs-md-7 mb-5"},he=m(()=>s("label",{class:"form-label",for:"email"},"電子信箱",-1)),ye={class:"text-danger fs-8 fw-bold mt-2"},ve=m(()=>s("label",{class:"form-label",for:"password"},"密碼",-1)),ge={class:"text-danger fs-8 fw-bold mt-2"},xe=m(()=>s("label",{class:"form-label",for:"confirm"},"密碼",-1)),we={class:"text-danger fs-8 fw-bold mt-2"},Ve=m(()=>s("button",{class:"btn btn-primary mb-3 w-100",type:"submit"},"下一步",-1)),Ye={class:"d-flex"},ke=m(()=>s("div",{class:"text-light me-2 fs-8 fs-md-7"},"已經有會員了嗎？",-1)),Se={class:"input-wrapper fs-8 fs-md-7 mb-5"},Me=m(()=>s("label",{class:"form-label",for:"name"},"姓名",-1)),De={class:"text-danger fs-8 fw-bold mt-2"},Fe=m(()=>s("label",{class:"form-label",for:"phone"},"手機號碼",-1)),Ie={class:"text-danger fs-8 fw-bold mt-2"},Te=m(()=>s("label",{class:"form-label",for:"birthday"},"生日",-1)),Re={class:"d-flex flex-row gap-2"},Ne=["value"],Ue=["value"],qe=["value"],Ae={class:"text-danger fs-8 fw-bold mt-2"},Ee=m(()=>s("label",{class:"form-label",for:"address"},"地址",-1)),Ce={class:"select-wrapper mb-3"},$e=["value"],ze=["value"],Be={class:"text-danger fs-8 fw-bold mt-2"},Oe={class:"form-check-label text-light",for:"agree"},Pe={class:"text-danger fs-8 fw-bold mt-2"},Le=m(()=>s("button",{class:"btn btn-primary mb-3 w-100",type:"submit"},"立即註冊",-1)),je={class:"d-flex"},Ge=m(()=>s("div",{class:"text-light me-2 fs-8 fs-md-7"},"已經有會員了嗎？",-1)),He=K({__name:"signup",async setup(w){let y,V;const v=M("FIRST"),I=M([null,null]),{$dayjs:T}=O(),P=()=>{const[d,t,b]=T().format("YYYY-M-D").split("-").map(Number);return{Y:d,M:t,D:b}},{cityTmpl:N}=oe(),a=M({email:"",password:"",confirm:"",name:"",phone:"",birthday:P(),address:{city:N[0],district:{district:String,zip_code:Number},detail:""},agree:!1}),{$validator:Y}=O(),U={password:d=>d?Y.isLength(d,{min:8})?Y.isAlpha(d)?"密碼不能只有英文":Y.isNumeric(d)?"密碼不能只有數字":Y.isAlphanumeric(d)?{}:"密碼需至少 8 碼以上，並英數混合":"密碼需至少 8 碼以上":"密碼 為必填",agree:d=>d?{}:"請閱讀並同意本網站個資使用規範"},q=D(()=>{const{Y:d,M:t}=a.value.birthday;return T(`${d}-${t}`,"YYYY-M").daysInMonth()});Q(()=>{q.value<a.value.birthday.D&&(a.value.birthday.D=1)});const A=M([]),E=d=>{if(d==="SECOND")return v.value="SECOND";G()},{signupApi:L,getTwzipcodeApi:j}=te(),C=W(),f=D(()=>$.value||z.value),{pending:$,refresh:G}=([y,V]=B(()=>L({body:D(()=>{const{agree:d,confirm:t,birthday:b,address:i,...k}=a.value,{Y:S,M:o,D:l}=b;return{...k,address:{zipcode:i.district.zip_code,detail:i.detail},birthday:T(`${S}-${o}-${l}`,"YYYY-M-D").format("YYYY-MM-DD")}}),immediate:!1,watch:!1,onResponse({response:d}){d.status===200&&(C.token=d._data.token,C.me=d._data.result,X("/"))},onResponseError({error:d}){var t;switch((t=d._data)==null?void 0:t.message){case"此 Email 已註冊":v.value="FIRST",Z(()=>{var b;(b=I.value[0])==null||b.setFieldError("email","此 Email 已註冊")});break}}})),y=await y,V(),y);$.value=!1;const{pending:z,refresh:H}=([y,V]=B(()=>j({query:D(()=>({city:a.value.address.city})),immediate:!1,onResponse({response:d}){if(d.status===200){const t=d._data.data.map(b=>({zip_code:b.zip_code,district:b.district}));A.value=t,a.value.address.district=t[0]}}})),y=await y,V(),y);return z.value=!1,H(),(d,t)=>{const b=J,i=ae,k=de,S=ee;return n(),p("main",re,[s("div",null,[ne,me,s("div",ue,[s("div",ce,[s("div",fe,[e(v)==="FIRST"?(n(),p(g,{key:0},[F("1")],64)):(n(),R(b,{key:1,name:"ic:baseline-check"}))]),pe]),s("div",{class:_([e(v)==="FIRST"?"bg-primary-60":"bg-primary-40","flex-fill space-line"])},null,2),s("div",{class:_([e(v)==="FIRST"?"text-primary-60":"text-light","d-flex flex-column align-items-center"])},[s("div",{class:_([e(v)==="FIRST"?"border border-primary-60":"bg-primary","rounded-circle num-ball mb-1"])}," 2 ",2),be],2)])]),e(v)==="FIRST"?(n(),R(S,{key:0,ref:o=>e(I)[0]=o,onSubmit:t[3]||(t[3]=o=>E("SECOND"))},{default:h(({errors:o})=>[s("div",_e,[s("div",null,[he,u(i,{id:"email",modelValue:e(a).email,"onUpdate:modelValue":t[0]||(t[0]=l=>e(a).email=l),modelModifiers:{trim:!0},class:_([o.email&&"verify-error","form-control"]),name:"email",label:"電子信箱",type:"email",placeholder:"hello@exsample.com",rules:"required|email",disabled:e(f)},null,8,["modelValue","class","disabled"]),s("div",ye,c(o.email),1)]),s("div",null,[ve,u(i,{id:"password",modelValue:e(a).password,"onUpdate:modelValue":t[1]||(t[1]=l=>e(a).password=l),modelModifiers:{trim:!0},class:_([o.password&&"verify-error","form-control"]),name:"password",label:"密碼",type:"password",placeholder:"請輸入密碼",rules:U.password,disabled:e(f)},null,8,["modelValue","class","rules","disabled"]),s("div",ge,c(o.password),1)]),s("div",null,[xe,u(i,{id:"confirm",modelValue:e(a).confirm,"onUpdate:modelValue":t[2]||(t[2]=l=>e(a).confirm=l),modelModifiers:{trim:!0},class:_([o.confirm&&"verify-error","form-control"]),name:"confirm",label:"密碼",type:"password",placeholder:"請再輸入一次密碼",rules:"required|confirmed:@password",disabled:e(f)},null,8,["modelValue","class","disabled"]),s("div",we,c(o.confirm),1)])]),s("div",null,[Ve,s("div",Ye,[ke,u(k,{class:"btn btn-text text-primary fs-8 fs-md-7",to:"/login"},{default:h(()=>[F("立即登入")]),_:1})])])]),_:1},512)):(n(),R(S,{key:1,ref:o=>e(I)[1]=o,onSubmit:t[13]||(t[13]=o=>E())},{default:h(({errors:o})=>[s("div",Se,[s("div",null,[Me,u(i,{id:"name",modelValue:e(a).name,"onUpdate:modelValue":t[4]||(t[4]=l=>e(a).name=l),modelModifiers:{trim:!0},class:_([o.name&&"verify-error","form-control"]),name:"name",label:"姓名",type:"text",placeholder:"請輸入姓名",rules:"required|min:2",disabled:e(f)},null,8,["modelValue","class","disabled"]),s("div",De,c(o.name),1)]),s("div",null,[Fe,u(i,{id:"phone",modelValue:e(a).phone,"onUpdate:modelValue":t[5]||(t[5]=l=>e(a).phone=l),modelModifiers:{trim:!0},class:_([o.phone&&"verify-error","form-control"]),name:"phone",label:"手機號碼",type:"text",placeholder:"請輸入手機號碼",rules:"required",disabled:e(f)},null,8,["modelValue","class","disabled"]),s("div",Ie,c(o.phone),1)]),s("div",null,[Te,s("div",Re,[u(i,{modelValue:e(a).birthday.Y,"onUpdate:modelValue":t[6]||(t[6]=l=>e(a).birthday.Y=l),class:"select flex-grow-1",name:"birthdayY",as:"select",rules:"required",disabled:e(f)},{default:h(()=>[(n(!0),p(g,null,x(Array.from({length:100},(l,r)=>Number(e(a).birthday.Y)-r),(l,r)=>(n(),p("option",{key:r,value:l},c(l)+" 年 ",9,Ne))),128))]),_:1},8,["modelValue","disabled"]),u(i,{modelValue:e(a).birthday.M,"onUpdate:modelValue":t[7]||(t[7]=l=>e(a).birthday.M=l),class:"select flex-grow-1",name:"birthdayM",as:"select",rules:"required",disabled:e(f)},{default:h(()=>[(n(!0),p(g,null,x(Array.from({length:12},(l,r)=>r+1),(l,r)=>(n(),p("option",{key:r,value:l},c(l)+" 月 ",9,Ue))),128))]),_:1},8,["modelValue","disabled"]),u(i,{modelValue:e(a).birthday.D,"onUpdate:modelValue":t[8]||(t[8]=l=>e(a).birthday.D=l),class:"select flex-grow-1",name:"birthdayD",as:"select",rules:"required",disabled:e(f)},{default:h(()=>[(n(!0),p(g,null,x(Array.from({length:e(q)},(l,r)=>r+1),(l,r)=>(n(),p("option",{key:r,value:l},c(l)+" 日 ",9,qe))),128))]),_:1},8,["modelValue","disabled"])]),s("div",Ae,c(o.birthday),1)]),s("div",null,[Ee,s("div",Ce,[u(i,{modelValue:e(a).address.city,"onUpdate:modelValue":t[9]||(t[9]=l=>e(a).address.city=l),class:"select",name:"addressCity",as:"select",rules:"required",disabled:e(f)},{default:h(()=>[(n(!0),p(g,null,x(e(N),(l,r)=>(n(),p("option",{key:r,value:l},c(l),9,$e))),128))]),_:1},8,["modelValue","disabled"]),u(i,{modelValue:e(a).address.district,"onUpdate:modelValue":t[10]||(t[10]=l=>e(a).address.district=l),class:"select",name:"addressDistrict",as:"select",rules:"required",disabled:e(f)},{default:h(()=>[(n(!0),p(g,null,x(e(A),(l,r)=>(n(),p("option",{key:r,value:l},c(l.district),9,ze))),128))]),_:1},8,["modelValue","disabled"])]),u(i,{id:"address",modelValue:e(a).address.detail,"onUpdate:modelValue":t[11]||(t[11]=l=>e(a).address.detail=l),modelModifiers:{trim:!0},class:_([o.address&&"verify-error","form-control"]),name:"address",label:"詳細地址",type:"text",placeholder:"請輸入詳細地址",rules:"required",disabled:e(f)},null,8,["modelValue","class","disabled"]),s("div",Be,c(o.address),1)]),s("div",null,[s("label",Oe,[u(i,{id:"agree",modelValue:e(a).agree,"onUpdate:modelValue":t[12]||(t[12]=l=>e(a).agree=l),class:"form-check-input",name:"agree",label:"使用規範",type:"checkbox",value:!0,rules:U.agree,disabled:e(f)},null,8,["modelValue","rules","disabled"]),F(" 我已閱讀並同意本網站個資使用規範 ")]),s("div",Pe,c(o.agree),1)])]),s("div",null,[Le,s("div",je,[Ge,u(k,{class:"btn btn-text text-primary fs-8 fs-md-7",to:"/login"},{default:h(()=>[F("立即登入")]),_:1})])])]),_:1},512))])}}}),es=ie(He,[["__scopeId","data-v-7f611229"]]);export{es as default};
